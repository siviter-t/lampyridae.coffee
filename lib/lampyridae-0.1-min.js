(function(){var t,i=function(t,i){function a(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return a.prototype=i.prototype,t.prototype=new a,t.__super__=i.prototype,t},e={}.hasOwnProperty;t=function(){var t;if(null==window.Lampyridae)return window.Lampyridae={};throw t=new Error("Lampyridae namespace could not be assigned. Is there a conflict?"),t.name="FatalError",t}(),window.Lampyridae.bugDefaultColour="#FAFF0A",window.Lampyridae.bugHueMax=102.72,window.Lampyridae.bugHueMin=65.28,window.Lampyridae.bugSaturation="100%",window.Lampyridae.bugLightness="50%",window.Lampyridae.bugOpacity=.7,window.Lampyridae.bugRadiusMax=2,window.Lampyridae.bugRadiusMin=.25,window.Lampyridae.bugSpeedMin=1,window.Lampyridae.bugSpeedMax=7,window.Lampyridae.bugTurningAngle=.1*Math.PI,window.Lampyridae.timestep=1,window.Lampyridae.Bug,window.Lampyridae.Canvas,window.Lampyridae.Particle,window.Lampyridae.hslToRgb,window.Lampyridae.rand,Lampyridae.Canvas=function(){function t(t,i){if(this.id=t,this.parent=null!=i?i:"body",!(arguments.length>0))throw new Error("Lampyridae: Canvas requires an #id selector");this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.setID(),this.append(),this.resizeToParent(),$(window).resize(function(t){return function(){t.resizeToParent()}}(this))}return t.prototype.width=function(){return $(this.element).width()},t.prototype.height=function(){return $(this.element).height()},t.prototype.setWidth=function(t){return null==t&&(t=$(this.parent).innerWidth()),$(this.element).width(t).attr("width",t),t},t.prototype.setHeight=function(t){return null==t&&(t=$(this.parent).innerHeight()),$(this.element).height(t).attr("height",t),t},t.prototype.setID=function(t){return this.id=null!=t?t:this.id,$(this.element).attr("id",this.id),this.id},t.prototype.append=function(t){this.parent=null!=t?t:this.parent,$(this.parent).append(this.element),console.log("Lampyridae: Appended #"+this.id+" to "+this.parent)},t.prototype.resizeToParent=function(){this.setWidth(),this.setHeight()},t.prototype.clear=function(){this.context.clearRect(0,0,this.width(),this.height())},t}(),Lampyridae.hslToRgb=function(t,i,e){var a,n,r,o,s,d;return t=parseFloat(t)/360,i=parseFloat(i)/100,e=parseFloat(e)/100,0===i?d=n=a=e:(r=function(t,i,e){return e<0&&(e+=1),e>1&&(e-=1),e<.5?i:e<1/6?t+6*(i-t)*e:e<2/3?t+(i-t)*(4-6*e):t},s=e<.5?e*(1+i):e+i-e*i,o=2*e-s,d=r(o,s,t+1/3),n=r(o,s,t),a=r(o,s,t-1/3)),[Math.round(255*d),Math.round(255*n),Math.round(255*a)]},$(document).ready(function(){var t,i,e,a,n,r;e=new Lampyridae.Canvas("world"),n=50,i=[],a=function(){var t,a,r,o;for(a=r=0,o=n;0<=o?r<o:r>o;a=0<=o?++r:--r)t=new Lampyridae.Bug(e),i.push(t)},t=function(){e.clear(),r(),requestAnimationFrame(t)},r=function(){var t,e,a;for(t=e=0,a=n;0<=a?e<a:e>a;t=0<=a?++e:--e)i[t].update()},a(),t()}),Lampyridae.Particle=function(){function t(t,i,e,a,n,r,o){this.canvas=t,this.x=i,this.y=e,this.theta=a,this.v=n,this.radius=r,this.rgb=o}return t.prototype.vx=function(){return this.v*Math.cos(this.theta)},t.prototype.vy=function(){return this.v*Math.sin(this.theta)},t.prototype.turn=function(t){null==t&&(t=0),this.theta+=t},t.prototype.turnAround=function(){this.turn(Math.PI)},t.prototype.move=function(){this.x+=Lampyridae.timestep*this.vx(),this.y+=Lampyridae.timestep*this.vy()},t.prototype.isOutsideCanvas=function(){var t,i;return!(0<=(t=this.x)&&t<=this.canvas.width())||!(0<=(i=this.y)&&i<=this.canvas.height())},t.prototype.applyHardBounds=function(){if(this.isOutsideCanvas())for(this.turnAround();!this.isOutsideCanvas();)this.move;else this.randomTurn();this.move()},t.prototype.update=function(){this.move(),this.draw()},t.prototype.draw=function(){this.canvas.context.beginPath(),this.canvas.context.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),this.canvas.context.fillStyle=this.rgb,this.canvas.context.fill()},t}(),Lampyridae.Bug=function(t){function e(t,i,a,n,r,o,s){var d;if(!(arguments.length>0))throw new Error("Lampyridae: Bug requires a valid Canvas instance to be attached to");null==i&&(i=Lampyridae.rand(0,t.width())),null==a&&(a=Lampyridae.rand(0,t.height())),null==r&&(r=Lampyridae.rand(Lampyridae.bugSpeedMin,Lampyridae.bugSpeedMax)),null==n&&(n=Lampyridae.rand(0,2*Math.PI)),null==o&&(o=Lampyridae.rand(Lampyridae.bugRadiusMin,Lampyridae.bugRadiusMax)),d=Lampyridae.rand(Lampyridae.bugHueMin,Lampyridae.bugHueMax),null==s&&(s=Lampyridae.hslToRgb(d,Lampyridae.bugSaturation,Lampyridae.bugLightness)),s="rgba("+s[0]+", "+s[1]+", "+s[2]+", "+Lampyridae.bugOpacity+")",e.__super__.constructor.call(this,t,i,a,n,r,o,s)}return i(e,t),e.prototype.randomTurn=function(){this.turn(Lampyridae.bugTurningAngle*(2*Math.random()-1))},e.prototype.fly=function(){this.applyHardBounds()},e.prototype.update=function(){this.fly(),this.draw()},e}(Lampyridae.Particle),Lampyridae.rand=function(t,i){return 0===arguments.length?Math.random():(i-t)*Math.random()+t}}).call(this);