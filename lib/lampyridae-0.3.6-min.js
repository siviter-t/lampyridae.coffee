!function(){"use strict";var t="undefined"==typeof global?self:global;if("function"!=typeof t.require){var e={},r={},i={},n={}.hasOwnProperty,o=/^\.\.?(\/|$)/,a=function(t,e){for(var r,i=[],n=(o.test(e)?t+"/"+e:e).split("/"),a=0,s=n.length;s>a;a++)r=n[a],".."===r?i.pop():"."!==r&&""!==r&&i.push(r);return i.join("/")},s=function(t){return t.split("/").slice(0,-1).join("/")},h=function(e){return function(r){var i=a(s(e),r);return t.require(i,e)}},u=function(t,e){var i=m&&m.createHot(t),n={id:t,exports:{},hot:i};return r[t]=n,e(n.exports,h(t),n),n.exports},c=function(t){return i[t]?c(i[t]):t},p=function(t,e){return c(a(s(t),e))},l=function(t,i){null==i&&(i="/");var o=c(t);if(n.call(r,o))return r[o].exports;if(n.call(e,o))return u(o,e[o]);throw new Error("Cannot find module '"+t+"' from '"+i+"'")};l.alias=function(t,e){i[e]=t};var d=/\.[^.\/]+$/,f=/\/index(\.[^\/]+)?$/,y=function(t){if(d.test(t)){var e=t.replace(d,"");n.call(i,e)&&i[e].replace(d,"")!==e+"/index"||(i[e]=t)}if(f.test(t)){var r=t.replace(f,"");n.call(i,r)||(i[r]=t)}};l.register=l.define=function(t,i){if(t&&"object"==typeof t)for(var o in t)n.call(t,o)&&l.register(o,t[o]);else e[t]=i,delete r[t],y(t)},l.list=function(){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t};var m=t._hmr&&new t._hmr(p,l,e,r);l._cache=r,l.hmr=m&&m.wrap,l.brunch=!0,t.require=l}}(),function(){"undefined"==typeof window?this:window;require.register("config.coffee",function(){(function(){Lampyridae.name="Lampyridae",Lampyridae.version="0.3.5",Lampyridae.timestep=1,Lampyridae.PIx2=2*Math.PI}).call(this)}),require.register("core/canvas.coffee",function(t,e,r){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e("core/draw"),Lampyridae.Canvas=function(){function e(e,r){if(this.parent=null!=r?r:"body",this.stop=t(this.stop,this),this.pause=t(this.pause,this),this.animate=t(this.animate,this),this.update=t(this.update,this),this.removeUpdate=t(this.removeUpdate,this),this.popUpdate=t(this.popUpdate,this),this.addUpdate=t(this.addUpdate,this),arguments.length<1)throw new Error("Canvas requires an #id selector");this._updateStack=[],this._stopAnim=!1,this._pauseAnim=!1,this.findOrMakeCanvas(e),this.context=this.element.getContext("2d"),this.size(),window.addEventListener("resize",function(t){return function(){return t.size()}}(this)),this.draw=new Lampyridae.Draw(this)}return e.prototype.findOrMakeCanvas=function(t,e){return null==e&&(e=this.parent),this.element=document.getElementById(t),null!=this.element?this.parent=this.element.parentElement:(this.element=document.createElement("canvas"),this.parent="body"===e?document.body:document.getElementById(e),this.id(t),this.appendCanvas())},e.prototype.appendCanvas=function(){return this.parent.appendChild(this.element),Lampyridae.Log.out("Appended #"+this.element.id+" to "+this.parent.nodeName.toLowerCase()+"#"+this.parent.id)},e.prototype.id=function(t){return null!=t&&(this.element.id=t),this.element.id},e.prototype.width=function(t){return null!=t&&this.element.setAttribute("width",t),this.element.clientWidth},e.prototype.height=function(t){return null!=t&&this.element.setAttribute("height",t),this.element.clientHeight},e.prototype.size=function(t,e){return null==t&&(t=this.parent.clientWidth),null==e&&(e=this.parent.clientHeight),this.width(t),this.height(e)},e.prototype.area=function(){return this.width()*this.height()},e.prototype.addUpdate=function(t){if("[object Function]"!==toString.call(t))throw new Error("Canvas.addUpdate requires a function");return this._updateStack.push(t)},e.prototype.popUpdate=function(){return this._updateStack.length>0?(this._updateStack.pop(),!0):!1},e.prototype.removeUpdate=function(t){var e,r,i;if("[object Function]"!==toString.call(t))throw new Error("Canvas.addUpdate requires a function");for(e=r=i=this._updateStack.length-1;r>=0;e=r+=-1)if(this._updateStack[e]===t)return this._updateStack.splice(e,1),!0;return!1},e.prototype.update=function(){var t,e,r,i,n;for(i=this._updateStack,n=[],e=0,r=i.length;r>e;e++)t=i[e],n.push(t());return n},e.prototype.animate=function(){return this._stopAnim?(this._stopAnim=!1,this._pauseAnim=!1):(this._pauseAnim||this.update(),requestAnimationFrame(this.animate))},e.prototype.pause=function(){return this._pauseAnim=!this._pauseAnim},e.prototype.stop=function(){return this._stopAnim=!0},e.prototype.schedule=function(t,e){return setTimeout(e,t)},e.prototype.has2DContext=function(){return null!=this.context?this.context.constructor===CanvasRenderingContext2D:!1},e}(),r.exports=Lampyridae.Canvas}).call(this)}),require.register("core/draw.coffee",function(t,e,r){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Lampyridae.Draw=function(){function e(e){if(this.canvas=e,this.circle=t(this.circle,this),this.arc=t(this.arc,this),this.glow=t(this.glow,this),this.fill=t(this.fill,this),this.stroke=t(this.stroke,this),this.end=t(this.end,this),this.begin=t(this.begin,this),this.beginClose=t(this.beginClose,this),this.setGlobalBlending=t(this.setGlobalBlending,this),this.setGlobalAlpha=t(this.setGlobalAlpha,this),this.resetGlobalAlpha=t(this.resetGlobalAlpha,this),this.clear=t(this.clear,this),this.clear=t(this.clear,this),arguments.length<1)throw new Error("Draw requires an instance of Canvas");this.ctx=this.canvas.context,Lampyridae.Log.out("Initialised 2D drawing object for #"+this.canvas.id()+" ")}return e.prototype.blendTypes=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],e.prototype.clear=function(t,e,r,i){return this.ctx.clearRect(t,e,r,i)},e.prototype.clear=function(){return this.ctx.clearRect(0,0,this.canvas.width(),this.canvas.height())},e.prototype.resetGlobalAlpha=function(){return this.ctx.globalAlpha=1},e.prototype.setGlobalAlpha=function(t){return t>=0&&1>t?this.ctx.globalAlpha=t:this.resetGlobalAlpha()},e.prototype.setGlobalBlending=function(t){return null==t&&(t="source-over"),this.ctx.globalCompositeOperation=t},e.prototype.beginClose=function(t){return this.ctx.beginPath(),"function"==typeof t&&t(),this.ctx.closePath()},e.prototype.begin=function(){return this.ctx.beginPath()},e.prototype.end=function(){return this.ctx.closePath()},e.prototype.stroke=function(t,e){return this.ctx.strokeStyle=e,this.ctx.lineWidth=t,this.ctx.stroke()},e.prototype.fill=function(t){return this.ctx.fillStyle=t,this.ctx.fill()},e.prototype.glow=function(t,e,r,i){return null==r&&(r=0),null==i&&(i=0),this.canvas.context.shadowOffsetX=r,this.canvas.context.shadowOffsetY=i,this.canvas.context.shadowColor=e,this.canvas.context.shadowBlur=t},e.prototype.arc=function(t,e,r,i,n,o){return null==n&&(n=0),null==o&&(o=!1),this.ctx.arc(t,e,r,n,i,!o)},e.prototype.circle=function(t,e,r){return this.arc(t,e,r,Lampyridae.PIx2)},e}(),r.exports=Lampyridae.Draw}).call(this)}),require.register("lampyridae.coffee",function(t,e){(function(){!function(){var t;if(null==window.Lampyridae)return window.Lampyridae={};throw t=new Error("Lampyridae namespace could not be assigned. Is there a conflict?"),t.name="FatalError",t}(),e("config"),e("util/log"),e("util/checkSupport"),"undefined"!=typeof DEBUG&&null!==DEBUG&&DEBUG&&(Lampyridae.Log.isLogging=!0,Lampyridae.Log.info("Debugging on"),Lampyridae.Log.info("Version "+Lampyridae.version)),e("core/canvas"),e("particle/particle")}).call(this)}),require.register("maths/forces.coffee",function(t,e,r){(function(){e("maths/vec2d"),Lampyridae.Forces=function(){function t(){}return t.G=1,t.nullForce=function(){return new Lampyridae.Vec2D(0,0)},t.gravity=function(t,e,r){return t[e].addForce(function(i){return function(){var n,o,a,s,h;return o=t[e].pos.distanceTo(t[r].pos),s=t[e].mass*t[r].mass,a=44*Math.sqrt(i.G*s),t[e].r+t[r].r<o&&a>o?(n=t[e].pos.directionTo(t[r].pos),h=i.G*s/(o*o),n.scale(h)):i.nullForce()}}(this))},t}(),r.exports=Lampyridae.Forces}).call(this)}),require.register("maths/rand.coffee",function(t,e,r){(function(){e("lampyridae"),Lampyridae.rand=function(t,e){return 0===arguments.length?Math.random():(e-t)*Math.random()+t},r.exports=Lampyridae.rand}).call(this)}),require.register("maths/vec2d.coffee",function(t,e,r){(function(){e("lampyridae"),Lampyridae.Vec2D=function(){function t(t,e){switch(arguments.length){case 1:if(!(t instanceof Lampyridae.Vec2D))throw new Error("Vec2D.constructor(1) requires a vector as an argument");return this.x=t.x,this.y=t.y,this;case 2:return this.x=null!=t?t:0,this.y=null!=e?e:0,this;default:throw new Error("Vec2D.constructor requires either 1 or 2 arguments")}}return t.prototype.add=function(t,e){switch(arguments.length){case 1:if(!(t instanceof Lampyridae.Vec2D))throw new Error("Vec2D.add(1) requires a vector as an argument");return this.add(t.x,t.y);case 2:return this.x+=t,this.y+=e,this;default:throw new Error("Vec2D.add requires either 1 or 2 arguments")}},t.prototype.angle=function(){return Math.atan2(this.y,this.x)},t.prototype.ascale=function(t){return this.x=this.x/t,this.y=this.y/t,this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.distanceTo=function(t){return new Lampyridae.Vec2D(t).subtract(this).length()},t.prototype.directionTo=function(t){return new Lampyridae.Vec2D(t).subtract(this).unit()},t.prototype.divide=function(t,e){switch(arguments.length){case 1:if(!(t instanceof Lampyridae.Vec2D))throw new Error("Vec2D.divide(1) requires a vector as an argument");return this.divide(t.x,t.y);case 2:return this.x=this.x/t,this.y=this.y/e,this;default:throw new Error("Vec2D.divide requires either 1 or 2 arguments")}},t.prototype.dot=function(){return this.x*this.x+this.y*this.y},t.prototype.length=function(){return Math.sqrt(this.dot())},t.prototype.multiply=function(t,e){switch(arguments.length){case 1:if(!(t instanceof Lampyridae.Vec2D))throw new Error("Vec2D.multiply(1) requires a vector as an argument");return this.multiply(t.x,t.y);case 2:return this.x=this.x*t,this.y=this.y*e,this;default:throw new Error("Vec2D.multiply requires either 1 or 2 arguments")}},t.prototype.normalLeft=function(){return this.x=-this.x,this},t.prototype.normalRight=function(){return this.y=-this.y,this},t.prototype.rotate=function(t){var e,r;return e=this.x*Math.cos(t)-this.y*Math.sin(t),r=this.x*Math.sin(t)+this.y*Math.cos(t),this.x=Math.abs(e)<1e-10?0:e,this.y=Math.abs(r)<1e-10?0:r,this},t.prototype.scale=function(t){return this.x=t*this.x,this.y=t*this.y,this},t.prototype.subtract=function(t,e){switch(arguments.length){case 1:if(!(t instanceof Lampyridae.Vec2D))throw new Error("Vec2D.subtract(1) requires a vector as an argument");return this.subtract(t.x,t.y);case 2:return this.x-=t,this.y-=e,this;default:throw new Error("Vec2D.subtract requires either 1 or 2 arguments")}},t.prototype.turnAround=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.unit=function(){return this.ascale(this.length())},t}(),r.exports=Lampyridae.Vec2D}).call(this)}),require.register("particle/firefly.coffee",function(t,e,r){(function(){var t=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty;e("maths/rand"),e("util/hslToRgb"),Lampyridae.Firefly=function(e){function r(t,e){var i;null==e&&(e={}),null==e.x&&(e.x=Lampyridae.rand(0,t.width())),null==e.y&&(e.y=Lampyridae.rand(0,t.height())),null==e.speed&&(e.speed=Lampyridae.rand(this.speed[0],this.speed[1])),null==e.theta&&(e.theta=Lampyridae.rand(0,Lampyridae.PIx2)),e.vx=e.speed*Math.cos(e.theta),e.vy=e.speed*Math.sin(e.theta),null==e.radius&&(e.radius=Lampyridae.rand(this.radius[0],this.radius[1])),null==e.alpha&&(e.alpha=this.opacity),null==e.glow&&(e.glow=this.glow),null==e.bound&&(e.bound=this.bound),null==e.colour&&(i=Lampyridae.hslToRgb(Lampyridae.rand(this.hue[0],this.hue[1]),this.saturation,this.lightness),e.colour="rgb("+i[0]+", "+i[1]+", "+i[2]+")"),r.__super__.constructor.call(this,t,e)}return t(r,e),r.prototype.turningAngle=.1*Math.PI,r.prototype.speed=[1,1.5],r.prototype.radius=[.8,3],r.prototype.hue=[64.86,123.55],r.prototype.saturation="100%",r.prototype.lightness="50%",r.prototype.opacity=.8,r.prototype.glow=4,r.prototype.bound="hard",r.prototype.randomTurn=function(){return this.turn(this.turningAngle*(2*Math.random()-1))},r.prototype.update=function(){return this.applyBounds()||this.randomTurn(),this.move_noa(),this.draw()},r}(Lampyridae.Particle),r.exports=Lampyridae.Firefly}).call(this)}),require.register("particle/particle.coffee",function(t,e,r){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e("maths/vec2d"),Lampyridae.Particle=function(){function e(e,r){var i,n,o,a,s,h,u,c,p,l,d,f,y,m,g;if(this.canvas=e,this.removeForce=t(this.removeForce,this),this.popForce=t(this.popForce,this),this.calcForce=t(this.calcForce,this),this.addForce=t(this.addForce,this),!(arguments.length>0))throw new Error("Particle requires a valid Canvas instance to be attached to");if(null==r&&(r={}),"[object Object]"!==toString.call(r))throw new Error("Particle requires a valid options object");this.r=null!=(i=r.radius)?i:1,this.bounded=!1,this.periodic=!1,this.changeBounds(null!=(n=r.bound)?n:"none"),this.pos=new Lampyridae.Vec2D(null!=(c=r.x)?c:0,null!=(p=r.y)?p:0),this.vel=new Lampyridae.Vec2D(null!=(l=r.vx)?l:0,null!=(d=r.vy)?d:0),this.acc=new Lampyridae.Vec2D(null!=(f=r.ax)?f:0,null!=(y=r.ay)?y:0),this.mass=null!=(m=r.mass)?m:this.r,this.F=new Lampyridae.Vec2D(0,0),this._forceStack=[],this.glow=null!=(g=r.glow)?g:0,this.alpha=null!=(o=r.alpha)?o:1,this.colour=null!=(a=r.colour)?a:"rgb(255, 255, 255)",this.stroke=null!=(s=r.stroke)?s:0,this.strokeColour=null!=(h=r.strokeColour)?h:this.colour,this.glowColour=null!=(u=r.glowColour)?u:this.colour,this._v=new Lampyridae.Vec2D(0,0),this._a=new Lampyridae.Vec2D(0,0),this._F=new Lampyridae.Vec2D(0,0)}return e.prototype.applyBounds=function(){return this.periodic?this.applyPeriodicBounds():this.bounded?this.applyHardBounds():!1},e.prototype.applyHardBounds=function(){var t;return t=!1,this.isOutsideCanvasX()&&(this.vel.normalLeft(),this.acc.normalLeft(),t=!0),this.isOutsideCanvasY()&&(this.vel.normalRight(),this.acc.normalRight(),t=!0),t},e.prototype.applyPeriodicBounds=function(){var t;return t=!1,this.isOutsideCanvasX()&&(this.pos.x=-this.pos.x+this.canvas.width(),t=!0),this.isOutsideCanvasY()&&(this.pos.y=-this.pos.y+this.canvas.height(),t=!0),t},e.prototype.isOutsideCanvasX=function(){var t;return 0+this.r<=(t=this.pos.x)&&t<=this.canvas.width()-this.r?!1:!0},e.prototype.isOutsideCanvasY=function(){var t;return 0+this.r<=(t=this.pos.y)&&t<=this.canvas.height()-this.r?!1:!0},e.prototype.isOutsideCanvas=function(){return this.isOutsideCanvasX()||this.isOutsideCanvasY()},e.prototype.changeBounds=function(t){switch(null==t&&(t="none"),t){case"hard":return this.bounded=!0,this.periodic=!1;case"periodic":return this.bounded=!1,this.periodic=!0;case"none":return this.bounded=!1,this.periodic=!1;default:return console.warn("Bound "+t+" is not valid. Defaulting to 'none'")}},e.prototype.addForce=function(t){if("[object Function]"!==toString.call(t))throw new Error("Particle.addForce requires a function as an argument");return this._forceStack.push(t)},e.prototype.calcForce=function(){var t,e,r,i;for(i=this._forceStack,e=0,r=i.length;r>e;e++)t=i[e],this.F.add(t());return this.F},e.prototype.move=function(){return this.acc.add(this._F.copy(this.calcForce()).scale(Lampyridae.timestep).ascale(this.mass)),this.vel.add(this._a.copy(this.acc).scale(Lampyridae.timestep)),this.pos.add(this._v.copy(this.vel).scale(Lampyridae.timestep)),this.acc.scale(0),this.F.scale(0)},e.prototype.move_noa=function(){return this.pos.add(this._v.copy(this.vel).scale(Lampyridae.timestep))},e.prototype.popForce=function(){return this._forceStack.length>0?(this._forceStack.pop(),!0):!1},e.prototype.removeForce=function(t){var e,r,i;if("[object Function]"!==toString.call(t))throw new Error("ForceParticle.removeForce requires a function");for(e=r=i=this._forceStack.length-1;r>=0;e=r+=-1)if(this._forceStack[e]===t)return this._forceStack.splice(e,1),!0;return!1},e.prototype.turn=function(t){return null==t&&(t=0),this.vel.rotate(t)},e.prototype.update=function(){return this.applyBounds(),this._forceStack.length>0?this.move():this.move_noa(),this.draw()},e.prototype.draw=function(){return this.canvas.draw.begin(),this.draw_alpha(),this.draw_glow(),this.draw_particle(),this.draw_fill(),this.draw_stroke(),this.canvas.draw.end()},e.prototype.draw_alpha=function(){return this.alpha<1?this.canvas.draw.setGlobalAlpha(this.alpha):void 0},e.prototype.draw_glow=function(){return this.glow>0?this.canvas.draw.glow(this.glow*this.r,this.glowColour):void 0},e.prototype.draw_fill=function(){return 0!==this.colour?this.canvas.draw.fill(this.colour):void 0},e.prototype.draw_particle=function(){return this.canvas.draw.circle(this.pos.x,this.pos.y,this.r)},e.prototype.draw_stroke=function(){return this.stroke>0?this.canvas.draw.stroke(this.stroke,this.strokeColour):void 0},e}(),r.exports=Lampyridae.Particle}).call(this)}),require.register("util/checkSupport.coffee",function(t,e,r){(function(){e("lampyridae"),Lampyridae.checkSupport=function(){return Boolean(document.createElement("canvas").getContext)},r.exports=Lampyridae.checkSupport}).call(this)}),require.register("util/hslToRgb.coffee",function(t,e,r){(function(){e("lampyridae"),Lampyridae.hslToRgb=function(t,e,r){var i,n,o,a,s,h;return t=parseFloat(t)/360,e=parseFloat(e)/100,r=parseFloat(r)/100,0===e?h=n=i=r:(o=function(t,e,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?t+6*(e-t)*r:.5>r?e:2/3>r?t+(e-t)*(4-6*r):t},s=.5>r?r*(1+e):r+e-r*e,a=2*r-s,h=o(a,s,t+1/3),n=o(a,s,t),i=o(a,s,t-1/3)),[Math.round(255*h),Math.round(255*n),Math.round(255*i)]},r.exports=Lampyridae.hslToRgb}).call(this)}),require.register("util/log.coffee",function(t,e,r){(function(){Lampyridae.Log={},Lampyridae.Log["default"]=function(){return Lampyridae.Log.warn("Nothing to log!")},Lampyridae.Log.error=function(t){return arguments.length<1?this["default"]():console.error(this.wrap(t))},Lampyridae.Log.info=function(t){return this.isLogging?arguments.length<1?this["default"]():console.info(this.wrap(t)):void 0},Lampyridae.Log.isLogging=!1,Lampyridae.Log.out=function(t){return this.isLogging?arguments.length<1?this["default"]():console.log(this.wrap(t)):void 0},Lampyridae.Log.prefix=Lampyridae.name+": ",Lampyridae.Log.warn=function(t){return arguments.length<1?this["default"]():console.warn(this.wrap(t))},Lampyridae.Log.wrap=function(t){return this.prefix+t},r.exports=Lampyridae.Log}).call(this)}),require.register("util/mediaMinWidth.coffee",function(t,e,r){(function(){e("lampyridae"),Lampyridae.mediaMinWidth=function(t){return null==t&&(t="600px"),window.matchMedia("screen and (min-width: "+t+")").matches},r.exports=Lampyridae.mediaMinWidth}).call(this)}),require.register("___globals___",function(){})}(),require("___globals___"),require("lampyridae");